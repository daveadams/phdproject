#+STARTUP: content
#+STARTUP: hidestars
#+STARTUP: indent



* Saturday, August 15
** DONE Admin interface beginnings [2/2]
   CLOSED: [2009-08-15 Sat 08:35]
   - [X] Drop login requirement
   - [X] See status of participants
         - [X] ExperimentalSession.current_participants
         - [X] ExperimentalSession.unseen_participants
         - [X] Split up participant list displays
** TODO Enforce page ordering [0/7]
   - [ ] PageOrder model?
   - [ ] Approved page order for tutorial
   - [ ] Approved page order for experiment
   - [ ] Approved page order for survey
   - [ ] Filter for out-of-sequence paging and redirect with flash
   - [ ] Every layout needs a flash area
   - [ ] Tutorial, experiment, and survey page titles in layout, using get_text helper
** DONE Participant state tracking [4/4]
   CLOSED: [2009-08-15 Sat 07:01]
   - [X] Add to Participant model:
         phase:string page:string round:integer cash:decimal
   - [X] Update in global filter
   - [X] Write some tests
   - [X] Upon login, redirect back to page specified by state



* Future
** TODO More admin [/]
   - [ ] Create/manage experimental groups
   - [ ] Create/manage experimental sessions
   - [ ] Generate participant IDs


* Sunday, August 9
** DONE Add div.error class to default.css
   CLOSED: [2009-08-09 Sun 17:02]
** DONE Experiment model [2/2]
   CLOSED: [2009-08-09 Sun 17:07]
   - [X] Fields: name
   - [X] Fixtures: normal, context_neutral
** DONE ExperimentalSession model [3/3]
   CLOSED: [2009-08-09 Sun 17:42]
   - [X] Fields: starts_at, ends_at, experiment_id
   - [X] is_active method
   - [X] test is_active
** DONE Link experiment -> experimentalsession -> participant [3/3]
   CLOSED: [2009-08-09 Sun 17:37]
   - [X] experiment.rb
   - [X] experimental_session.rb
   - [X] participant.rb
** DONE Login: require participant to be part of an active experimental session [4/4]
   CLOSED: [2009-08-09 Sun 17:56]
   - [X] Test for inactive failure
   - [X] Test for active success
   - [X] Participant.find_active(pn)
   - [X] login_controller.rb

* Wednesday, August 12
** DONE Participant model fillout [5/5]
   CLOSED: [2009-08-12 Wed 14:26]
   - [X] Test creation
   - [X] Test validation
   - [X] Method to generate participant numbers
   - [X] Login method
   - [X] Visit method
** DONE Session support [6/6]
   CLOSED: [2009-08-12 Wed 15:38]
   - [X] Login controller create session
   - [X] Test for session existence
   - [X] Session tracks participant ID
   - [X] Check cookie contents to be sure it's not possible to modify
   - [X] Tutorial session check
         Redirect to /login with a flash error if no session
   - [X] Test for tutorial session check
** DONE Update participant fields as appropriate [3/3]
   CLOSED: [2009-08-12 Wed 14:42]
   - [X] first_login
   - [X] last_access
   - [X] is_active
** DONE Further integration testing [4/4]
   CLOSED: [2009-08-12 Wed 15:45]
   - [X] DB session checks after login
   - [X] Should refuse repeat logins
   - [X] Tutorial allows you through on correct login
   - [X] Tutorial bounces on expired experimental_session
** DONE In browser testing [2/2]
   CLOSED: [2009-08-12 Wed 16:02]
   - [X] Tutorial allows you in if you use a valid participant number
   - [X] Tutorial bounces you with an error if you don't
** DONE Simplest possible admin page to list valid participant numbers, etc [2/2]
   CLOSED: [2009-08-12 Wed 15:53]
   - [X] admin controller
   - [X] list of currently active participant numbers


* Thursday, August 13
** DONE Figure out weird flash issue [2/2]
   CLOSED: [2009-08-13 Thu 12:21]
   - [X] Add some trace statements to login/index
   - [X] Analyze the log output
   The problem is that it was setting flash within the same request so it got
   displayed once and not cleared until the second time.
** DONE Fix flash issue [3/3]
   CLOSED: [2009-08-13 Thu 12:50]
   - [X] Create new action login/login
         - [X] Move login logic to there
         - [X] Redirects on fail back to login/index
   - [X] Update login/index view to post to login/login
   - [X] Update tests to post to login/login instead of login/index
** DONE Get started on tutorial [3/3]
   CLOSED: [2009-08-13 Thu 16:26]
   - [X] Encode page sequence somehow
   - [X] Create get_text helper to map group and page names correctly
   - [X] Create next/back buttons
** DONE TutorialText model [2/2]
   CLOSED: [2009-08-13 Thu 15:43]
   - [X] Create model: group_name, page_name, text_key, text
   - [X] Populate fixtures
** DONE Move error messages out of controller/test to stay DRY [5/5]
   CLOSED: [2009-08-13 Thu 13:22]
   - [X] Find out the Rails Way
         No good.
   - [X] Come up with a new way
   - [X] Create class ErrorStrings in lib/error_strings.rb
   - [X] Replace strings in controllers
   - [X] Replace strings in tests
** DONE Move require_valid_session to application_controller [2/2]
   CLOSED: [2009-08-13 Thu 13:32]
   - [X] Figure out how to specify before_filter excepting login controller
   - [X] Move before_filter and require_valid_session into application_controller

* Friday, August 14
** DONE ExperimentalGroup model [21/21]
   CLOSED: [2009-08-14 Fri 15:31]
   - [X] New git branch
   - [X] Create model: name:string
   - [X] Create fixtures: control, context_neutral, x1, x2
   - [X] Create TutorialTextGroup model: name:string
   - [X] Add tutorial_text_group_id field to ExperimentalGroup
   - [X] Link TutorialTextGroup and ExperimentalGroup
   - [X] Link TutorialTextGroup and TutorialTexts
   - [X] Update fixtures for experimental_groups
   - [X] Create fixtures for tutorial_text_groups
   - [X] TutorialText migration: drop group_name
   - [X] TutorialText migration: add group_id
   - [X] Update tutorial_text fixtures
   - [X] Link Participants to ExperimentalGroup
   - [X] Update participant fixtures
   - [X] Require experimental_group in participant
   - [X] Update participant unit tests
   - [X] Move text lookup into TutorialText model
   - [X] Update tutorial_helper accordingly
   - [X] Update functional tests if necessary
   - [X] Update login integration test if necessary
   - [X] Update tutorial integration test if necessary
** DONE Mass-creation of participants method [2/2]
   CLOSED: [2009-08-14 Fri 16:16]
   - [X] New method on ExperimentalSession
         Takes number of participants, experimental group
   - [X] Tests for this new feature
** DONE Figure out how to merge git branches [4/4]
   CLOSED: [2009-08-14 Fri 16:00]
   - [X] Find reference
         http://blog.jrock.us/articles/Git%20merging%20by%20example.pod
   - [X] Copy tree to a temp working space
   - [X] Try merging ExperimentalGroup branch into TutorialText
   - [X] Once we understand it, do it for real
** DONE Switch ExperimentalSession active to a toggle [5/5]
   CLOSED: [2009-08-14 Fri 16:38]
   - [X] Update model with a boolean, remove ends_at, begins_at
   - [X] Update is_active? method
   - [X] Update fixtures
   - [X] Update unit tests
   - [X] Update integration tests


