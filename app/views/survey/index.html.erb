<% form_tag do %>
  <% @questions.each do |question| %>
    <% unless @answers[question.id] %>
    <div class="survey-question">
      <% if flash[:survey_errors] and flash[:survey_errors][question.id] %>
        <div class="error"><%= flash[:survey_errors][question.id] %></div>
      <% end %>
      <b><%=h question.question %></b>
      <% if question.fill_in_the_blank? %>
        <input type="text" size="3" name="q<%= question.id %>"
           <% if @answers[question.id] %>value="<%= @answers[question.id].answer %>"<% end %> />
      <% else %>
        <br />
        <% question.answers.each do |a| %>
          <input type="radio" name="q<%= question.id %>" id="a<%= a.id %>" value="<%= a.id %>"
            <% if @answers[question.id] %>
              disabled
              <% if @answers[question.id].id == a.id %>
                checked
              <% end %>
            <% end %> />
          <label for="a<%= a.id %>"><%=h a.answer %></label>
          <br />
        <% end %>
      <% end %>
    </div>
    <% end %>
  <% end %>
  <%= submit_tag "Continue >>" %>
<% end %>
